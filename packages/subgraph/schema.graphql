type Atom @entity {
  id: ID!
  creator: Account!
  wallet: Bytes!
  uri: String!
  data: String!

  type: AtomType!
  emoji: String
  label: String
  image: String

  value: AtomValue

  isSubject: [Triple!]! @derivedFrom(field: "subject")
  isPredicate: [Triple!]! @derivedFrom(field: "predicate")
  isObject: [Triple!]! @derivedFrom(field: "object")

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Account @entity {
  id: ID!
  name: String
  image: String
  createdAtoms: [Atom!]! @derivedFrom(field: "creator")
  createdTriples: [Triple!]! @derivedFrom(field: "creator")
  feeTransfers: [FeeTransfer!]! @derivedFrom(field: "sender")
  deposits: [Deposit!]! @derivedFrom(field: "sender")
}

type Triple @entity(immutable: true) {
  id: String!
  creator: Account!
  subject: Atom!
  predicate: Atom!
  object: Atom!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

enum AtomType {
  Unknown
  JSON
  Person
  Book
  LikeAction
  FollowAction
}

type AtomValue @entity {
  id: ID!
  person: Person
  book: Book
}

type Person @entity {
  id: ID!
  identifier: String
  name: String
  image: String
  email: String
  url: String
}

type Book @entity {
  id: ID!
  name: String
  genre: String
  url: String
}

type Deposit @entity(immutable: true) {
  id: Bytes!
  sender: Account! # address
  receiver: Bytes! # address
  vaultBalance: BigInt! # uint256
  userAssetsAfterTotalFees: BigInt! # uint256
  sharesForReceiver: BigInt! # uint256
  entryFee: BigInt! # uint256
  EthMultiVault_id: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type FeeTransfer @entity(immutable: true) {
  id: Bytes!
  sender: Account! # address
  protocolVault: Bytes! # address
  amount: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Redemption @entity(immutable: true) {
  id: Bytes!
  sender: Bytes! # address
  owner: Bytes! # address
  vaultBalance: BigInt! # uint256
  assetsForReceiver: BigInt! # uint256
  shares: BigInt! # uint256
  exitFee: BigInt! # uint256
  EthMultiVault_id: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}
