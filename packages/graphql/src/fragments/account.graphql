fragment AccountMetadata on accounts {
  label
  image
  id
  atomId
  type
}

fragment AccountClaims on accounts {
  claims(order_by: { shares: desc }) {
    triple {
      id
      label
    }
    shares
    counterShares
  }
}

fragment AccountPositions on accounts {
  positions_aggregate(order_by: { shares: desc }) {
    nodes {
      id
      shares
      vault {
        id
        totalShares
        currentSharePrice
        atom {
          id
          label
        }
        triple {
          id
          label
        }
      }
    }
  }
}

fragment AccountCreatedAtoms on accounts {
  createdAtoms_aggregate(
    where: $atomsWhere
    order_by: $atomsOrderBy
    limit: $atomsLimit
    offset: $atomsOffset
  ) {
    aggregate {
      count
      sum {
        id
      }
    }
    nodes {
      id
      label
      data
      vault {
        totalShares
        positions_aggregate(where: { accountId: { _eq: $address } }) {
          nodes {
            account {
              id
            }
            shares
          }
        }
      }
    }
  }
}

fragment AccountCreatedTriples on accounts {
  createdTriples_aggregate(
    where: $triplesWhere
    order_by: $triplesOrderBy
    limit: $triplesLimit
    offset: $triplesOffset
  ) {
    aggregate {
      count
    }
    nodes {
      id
      label
      subject {
        id
        label
      }
      predicate {
        id
        label
      }
      object {
        id
        label
      }
    }
  }
}
