fragment VaultDetails on vaults {
  id
  atom {
    id
    label
  }
  triple {
    id
    subject {
      id
      label
    }
    predicate {
      id
      label
    }
    object {
      id
      label
    }
  }
  currentSharePrice
  totalShares
}

fragment VaultDetailsWithFilteredPositions on vaults {
  id
  atom {
    id
    label
  }
  triple {
    id
    subject {
      id
      label
    }
    predicate {
      id
      label
    }
    object {
      id
      label
    }
  }
  positions_aggregate(where: { accountId: { _in: $addresses } }) {
    aggregate {
      sum {
        shares
      }
    }
    nodes {
      account {
        id
        label
      }
      shares
    }
  }
  currentSharePrice
  totalShares
}

fragment VaultFieldsForTriple on vaults {
  totalShares
  currentSharePrice
  positions_aggregate {
    ...PositionAggregateFields
  }
  positions {
    ...PositionFields
  }
}
