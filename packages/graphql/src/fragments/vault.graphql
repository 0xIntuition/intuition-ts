fragment VaultDetails on vaults {
  id
  atom {
    id
    label
  }
  triple {
    id
    subject {
      id
      label
    }
    predicate {
      id
      label
    }
    object {
      id
      label
    }
  }
  positions_aggregate(where: { accountId: { _in: $addresses } }) {
    nodes {
      account {
        id
        label
      }
      shares
    }
  }
  currentSharePrice
  totalShares
}

fragment AtomVaultDetailsWithPositions on vaults {
  vault {
    totalShares
    currentSharePrice
    positions_aggregate(where: { accountId: { _in: $addresses } }) {
      aggregate {
        sum {
          shares
        }
      }
      nodes {
        account {
          id
        }
        shares
      }
    }
  }
}

fragment TripleVaultCountDetailsWithPositions on vaults {
  vault {
    totalShares
    currentSharePrice
    positions_aggregate(where: { accountId: { _in: $addresses } }) {
      nodes {
        account {
          id
        }
        shares
      }
    }
  }
  counterVault {
    totalShares
    positions_aggregate(where: { accountId: { _in: $addresses } }) {
      nodes {
        account {
          id
        }
        shares
      }
    }
  }
}
